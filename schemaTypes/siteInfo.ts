<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little High Street Studio</title>
    <!-- Favicon will be set by JavaScript -->
    <link id="favicon" rel="icon" type="image/png" href="">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Add smooth scrolling behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Custom styles for the interactive one-pager */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0;
            color: #111827;
            /* Creating the grid background */
            background-image:
                linear-gradient(rgba(209, 213, 219, 0.5) 1px, transparent 1px),
                linear-gradient(to right, rgba(209, 213, 219, 0.5) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: move-grid 40s linear infinite;
            background-attachment: fixed; /* Makes the background fixed during scroll */
        }
        
        body.overflow-hidden {
             overflow: hidden;
        }

        .font-archivo-black { font-family: 'Archivo Black', sans-serif; }

        .cta-button {
            border: 1px solid #111827; padding: 0.75rem 1.5rem; border-radius: 9999px;
            transition: all 0.3s ease; letter-spacing: 0.05em;
        }
        .cta-button:hover { background-color: #111827; color: #ffffff; }
        .cta-button span { display: inline-block; transition: transform 0.3s ease; }
        .cta-button:hover span { transform: translateX(5px); }

        .content-section {
            background-color: rgba(240, 240, 240, 0.95);
            backdrop-filter: blur(4px);
        }
        
        .form-input {
            width: 100%; padding: 0.75rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem;
            background-color: #fff; transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-input:focus { outline: none; border-color: #111827; box-shadow: 0 0 0 2px rgba(17, 24, 39, 0.2); }

        /* Floating Logo */
        #floating-logo {
            position: fixed;
            top: 1.5rem;
            left: 1.5rem;
            z-index: 100;
            width: 80px;
            height: auto;
            transition: transform 0.3s ease;
        }
        #floating-logo:hover {
            transform: scale(1.05);
        }

        /* Floating Menu Button */
        #menu-toggle {
            position: fixed; top: 1.5rem; right: 1.5rem; z-index: 100;
            width: 50px; height: 50px; background-color: #fff; border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; flex-direction: column;
            justify-content: center; align-items: center; transition: all 0.3s ease;
        }
        #menu-toggle .line {
            width: 22px; height: 2px; background-color: #111827;
            margin: 2.5px 0; transition: all 0.3s ease;
        }
        #menu-toggle.active .line1 { transform: translateY(7px) rotate(45deg); }
        #menu-toggle.active .line2 { opacity: 0; }
        #menu-toggle.active .line3 { transform: translateY(-7px) rotate(-45deg); }

        /* Navigation Overlay */
        #nav-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-color: rgba(240, 240, 240, 0.98); backdrop-filter: blur(8px);
            z-index: 90; display: flex; justify-content: center; align-items: center;
            opacity: 0; visibility: hidden; transition: opacity 0.4s ease, visibility 0.4s;
        }
        #nav-overlay.active { opacity: 1; visibility: visible; }
        #nav-overlay nav a {
            display: block; font-size: 2.5rem; text-transform: uppercase; margin: 1.5rem 0;
            font-family: 'Archivo Black', sans-serif; transition: transform 0.3s ease, color 0.3s ease;
        }
        #nav-overlay nav a:hover { transform: translateX(10px); color: #555; }

        /* Scroll fade-in animation */
        .scroll-fade {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .scroll-fade.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Hero section fade-in animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        
        @keyframes move-grid {
            from { background-position: 0 0; }
            to { background-position: -40px 0; }
        }

    </style>
</head>
<body class="antialiased">

    <!-- Floating Logo -->
    <a href="#home" id="floating-logo" aria-label="Back to top">
        <!-- Logo image will be set by JavaScript -->
        <img id="logo-img" src="" alt="Little High Street Tattoo Logo">
    </a>

    <!-- Floating Menu Button -->
    <button id="menu-toggle" aria-label="Open navigation menu">
        <div class="line line1"></div>
        <div class="line line2"></div>
        <div class="line line3"></div>
    </button>
    
    <!-- Navigation Overlay -->
    <div id="nav-overlay">
        <nav class="text-center">
            <a href="#home" class="nav-overlay-link">Home</a>
            <a href="#about" class="nav-overlay-link">About</a>
            <a href="#gallery" class="nav-overlay-link">Gallery</a>
            <a href="#work" class="nav-overlay-link">Work</a>
            <a href="#contact" class="nav-overlay-link">Contact</a>
        </nav>
    </div>

    <!-- Hero Section -->
    <div id="home" class="min-h-screen flex flex-col items-center justify-center p-4 content-section overflow-hidden">
        <main class="flex-grow flex flex-col items-center justify-center text-center w-full max-w-7xl mx-auto px-4">
            <h1 class="font-archivo-black text-6xl sm:text-7xl md:text-8xl lg:text-[120px] leading-none tracking-tighter fade-in-up" style="animation-delay: 0.1s;">
                LITTLE HIGH<br>STREET
            </h1>
            <a href="#gallery" class="cta-button mt-12 text-sm fade-in-up" style="animation-delay: 0.5s;">
                SEE WORK <span>&rarr;</span>
            </a>
        </main>
    </div>
    
    <!-- About Section -->
    <section id="about" class="py-20 md:py-32 content-section scroll-fade">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="font-archivo-black text-3xl md:text-4xl uppercase tracking-tighter">Our Philosophy</h2>
            <p id="philosophy-text" class="mt-6 max-w-2xl mx-auto text-base md:text-lg text-gray-700"></p>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="py-20 md:py-32 content-section scroll-fade">
        <div class="max-w-7xl mx-auto text-center px-4">
            <h2 class="font-archivo-black text-3xl md:text-4xl uppercase tracking-tighter mb-12">Gallery</h2>
            <div id="instagram-feed" class="w-full bg-gray-200 p-8 rounded-lg">
                <p class="text-gray-600">Your live Instagram feed will appear here. Paste the widget code to replace this message.</p>
            </div>
            <a href="https://www.instagram.com/littlehighstreettattoo/" target="_blank" rel="noopener noreferrer" class="cta-button mt-12 text-sm inline-block">
                Follow on Instagram <span>&rarr;</span>
            </a>
        </div>
    </section>
    
    <!-- Work / Artists Section -->
    <section id="work" class="py-20 md:py-32 content-section scroll-fade">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="font-archivo-black text-3xl md:text-4xl uppercase tracking-tighter text-center mb-12">Resident Artists</h2>
            <div id="resident-artists" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-12 max-w-6xl mx-auto">
                <!-- Resident artists will be injected here by JavaScript -->
            </div>
        </div>
    </section>
    
    <!-- Contact Section -->
    <section id="contact" class="py-20 md:py-32 content-section scroll-fade">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="font-archivo-black text-3xl md:text-4xl uppercase tracking-tighter">Find Us</h2>
            <p id="studio-address" class="mt-4 text-gray-700 text-lg"></p>
            <div class="mt-8 rounded-lg overflow-hidden border-2 border-gray-200">
                <iframe id="map-iframe" src="" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div class="mt-16">
                <h3 class="font-archivo-black text-2xl md:text-3xl uppercase tracking-tighter">Opening Hours</h3>
                <div id="opening-hours" class="mt-6 text-gray-800 text-base md:text-lg max-w-xs mx-auto">
                    <!-- Opening hours will be injected here by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 content-section scroll-fade">
        <div class="max-w-7xl mx-auto px-6 text-center text-xs text-gray-500">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="https://facebook.com" target="_blank" rel="noopener noreferrer" class="hover:text-gray-900" aria-label="Facebook"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                <a href="https://www.instagram.com/littlehighstreettattoo/" target="_blank" rel="noopener noreferrer" class="hover:text-gray-900" aria-label="Instagram"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664 4.771 4.919 4.919 1.266.058 1.644.07 4.85.07zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.059 1.689.073 4.948.073s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689-.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z" /></svg></a>
            </div>
            <p>&copy; 2024 Little High Street Studio. All Rights Reserved.</p>
        </div>
    </footer>

    <script type="module">
        import { createClient } from 'https://cdn.skypack.dev/@sanity/client';

        const client = createClient({
            projectId: 'x4thwm7m',
            dataset: 'littlehighstreet',
            apiVersion: '2022-03-07',
            useCdn: true
        });

        const siteInfoQuery = `*[_type == "siteInfo"][0]{..., "logoUrl": logo.asset->url}`;
        const artistQuery = `*[_type == "artist"]{ name, handle, bio, "photoUrl": photo.asset->url }`;
        const locationQuery = `*[_type == "location"][0]`;

        async function fetchData() {
            try {
                const siteInfo = await client.fetch(siteInfoQuery);
                const artists = await client.fetch(artistQuery);
                const location = await client.fetch(locationQuery);

                if (siteInfo) {
                    renderSiteInfo(siteInfo);
                    renderGallery(siteInfo);
                }
                if (artists) {
                    renderArtists(artists);
                }
                if (location) {
                    renderContact(location);
                }
            } catch (error) {
                console.error("Failed to fetch data from Sanity:", error);
            }
        }

        function renderSiteInfo(data) {
            if (!data) return;
            if (data.philosophy) {
                document.getElementById('philosophy-text').textContent = data.philosophy;
            }
            if (data.logoUrl) {
                document.getElementById('logo-img').src = data.logoUrl;
                document.getElementById('favicon').href = data.logoUrl;
            }
            if (data.openingHours) {
                const hoursContainer = document.getElementById('opening-hours');
                hoursContainer.innerHTML = ''; // Clear existing content
                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-2 gap-x-4 gap-y-1';
                data.openingHours.forEach(item => {
                    grid.innerHTML += `<p class="text-right font-medium">${item.day}:</p><p class="text-left">${item.time}</p>`;
                });
                hoursContainer.appendChild(grid);
                hoursContainer.innerHTML += `<p class="text-sm mt-6 italic">By Appointment Only</p>`;
            }
        }

        function renderGallery(data) {
            if (!data || !data.instagramWidget) return;
            const galleryContainer = document.getElementById('instagram-feed');
            galleryContainer.innerHTML = data.instagramWidget;
        }

        function renderArtists(artists) {
            const residentContainer = document.getElementById('resident-artists');
            let residentHTML = '';
            artists.forEach(artist => {
                residentHTML += `
                    <a href="https://instagram.com/${artist.handle.replace('@', '')}" target="_blank" rel="noopener noreferrer" class="block text-center group">
                        <div class="w-48 h-48 mx-auto rounded-full bg-gray-200 mb-4 overflow-hidden transition-transform duration-300 group-hover:scale-105">
                            <img src="${artist.photoUrl}?w=200&h=200&fit=crop" alt="Portrait of artist ${artist.name}" class="w-full h-full object-cover">
                        </div>
                        <h3 class="font-bold text-xl">${artist.name}</h3>
                        <p class="text-gray-600">${artist.handle}</p>
                        <p class="mt-2 text-sm">${artist.bio}</p>
                    </a>
                `;
            });
            residentContainer.innerHTML = residentHTML;
        }

        function renderContact(location) {
            if (!location) return;
            if (location.googleMapsUrl) {
                 document.getElementById('map-iframe').src = location.googleMapsUrl;
            }
            if (location.address) {
                document.getElementById('studio-address').textContent = location.address;
            }
        }

        // --- UI Interactions ---
        const body = document.body;
        const menuToggle = document.getElementById('menu-toggle');
        const navOverlay = document.getElementById('nav-overlay');
        const navLinks = document.querySelectorAll('.nav-overlay-link');

        const toggleMenu = () => {
            menuToggle.classList.toggle('active');
            navOverlay.classList.toggle('active');
            body.classList.toggle('overflow-hidden');
        };

        menuToggle.addEventListener('click', toggleMenu);
        navLinks.forEach(link => link.addEventListener('click', () => {
            if (navOverlay.classList.contains('active')) {
                toggleMenu();
            }
        }));

        const scrollFadeElements = document.querySelectorAll('.scroll-fade');
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        scrollFadeElements.forEach(el => observer.observe(el));
        
        // --- Fetch data on load ---
        fetchData();
    </script>
</body>
</html>

